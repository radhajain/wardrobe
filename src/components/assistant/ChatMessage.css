.chat-message {
	display: flex;
	margin-bottom: var(--spacing-md);
}

.chat-message--user {
	justify-content: flex-end;
}

.chat-message--assistant {
	justify-content: flex-start;
}

.chat-message__content {
	max-width: 80%;
	padding: var(--spacing-md);
	border-radius: var(--radius-md);
}

.chat-message--user .chat-message__content {
	background-color: var(--color-accent);
	color: var(--color-surface);
}

.chat-message--assistant .chat-message__content {
	background-color: var(--color-background-alt);
	color: var(--color-text-primary);
}

.chat-message__text {
	margin: 0;
	line-height: 1.6;
	white-space: pre-wrap;
}

/* Markdown styles for assistant messages */
.chat-message__markdown {
	line-height: 1.6;
}

.chat-message__markdown p {
	margin: 0 0 var(--spacing-sm) 0;
}

.chat-message__markdown p:last-child {
	margin-bottom: 0;
}

.chat-message__markdown h1,
.chat-message__markdown h2,
.chat-message__markdown h3,
.chat-message__markdown h4 {
	margin: var(--spacing-md) 0 var(--spacing-sm) 0;
	font-weight: var(--font-weight-medium);
}

.chat-message__markdown h1:first-child,
.chat-message__markdown h2:first-child,
.chat-message__markdown h3:first-child {
	margin-top: 0;
}

.chat-message__markdown h3 {
	font-size: var(--font-size-base);
}

.chat-message__markdown h4 {
	font-size: var(--font-size-sm);
}

.chat-message__markdown ul,
.chat-message__markdown ol {
	margin: var(--spacing-sm) 0;
	padding-left: var(--spacing-lg);
}

.chat-message__markdown li {
	margin-bottom: var(--spacing-xs);
}

.chat-message__markdown strong {
	font-weight: var(--font-weight-medium);
}

.chat-message__markdown em {
	font-style: italic;
}

.chat-message__markdown code {
	background-color: rgba(0, 0, 0, 0.05);
	padding: 2px 4px;
	border-radius: var(--radius-sm);
	font-size: 0.9em;
}

.chat-message__markdown blockquote {
	margin: var(--spacing-sm) 0;
	padding-left: var(--spacing-md);
	border-left: 2px solid var(--color-border);
	color: var(--color-text-secondary);
}

.chat-message__items {
	margin-top: var(--spacing-md);
	padding-top: var(--spacing-md);
	border-top: 1px solid var(--color-border-subtle);
}

.chat-message--user .chat-message__items {
	border-top-color: rgba(255, 255, 255, 0.2);
}

.chat-message__items-label {
	display: block;
	font-size: var(--font-size-xs);
	color: var(--color-text-muted);
	margin-bottom: var(--spacing-sm);
	text-transform: uppercase;
	letter-spacing: var(--letter-spacing-wide);
}

.chat-message--user .chat-message__items-label {
	color: rgba(255, 255, 255, 0.7);
}

.chat-message__items-grid {
	display: flex;
	flex-wrap: wrap;
	gap: var(--spacing-sm);
}

.chat-message__item {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: var(--spacing-xs);
	width: 80px;
	background: none;
	border: none;
	padding: var(--spacing-xs);
	border-radius: var(--radius-sm);
	cursor: pointer;
	transition: all var(--transition-fast);
}

.chat-message__item:hover {
	background-color: rgba(0, 0, 0, 0.05);
}

.chat-message--user .chat-message__item:hover {
	background-color: rgba(255, 255, 255, 0.1);
}

.chat-message__item-image {
	width: 72px;
	height: 72px;
	object-fit: cover;
	border-radius: var(--radius-sm);
	background-color: var(--color-surface);
}

.chat-message__item-name {
	font-size: var(--font-size-xs);
	text-align: center;
	line-height: 1.2;
	overflow: hidden;
	text-overflow: ellipsis;
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
}

.chat-message--user .chat-message__item-name {
	color: rgba(255, 255, 255, 0.9);
}

.chat-message__actions {
	margin-top: var(--spacing-sm);
	padding-top: var(--spacing-sm);
	border-top: 1px solid var(--color-border-subtle);
	display: flex;
	justify-content: flex-end;
}

.chat-message__redo-btn {
	padding: 2px var(--spacing-sm);
	background: none;
	border: none;
	font-size: var(--font-size-xs);
	color: var(--color-text-muted);
	cursor: pointer;
	text-decoration: underline;
	transition: color var(--transition-fast);
}

.chat-message__redo-btn:hover:not(:disabled) {
	color: var(--color-text-primary);
}

.chat-message__redo-btn:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}
